<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="../dashboard.css">

<<<<<<< HEAD
<!-- Success popup -->
<script th:if="${message}">
    alert('[[${message}]]');
</script>

<!-- Error popup -->
<script th:if="${error}">
    alert('[[${error}]]');
</script>

</head>
<body>
<!-- Popup alerts

<div th:if="${message}" class="alert alert-success alert-dismissible fade show" role="alert">
    <span th:text="${message}"></span>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>

<div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
    <span th:text="${error}"></span>
    <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
</div>
 -->
=======
  <!-- ‚úÖ Success popup -->
  <script th:if="${message}">
      alert('[[${message}]]');
  </script>

  <!-- ‚úÖ Error popup -->
  <script th:if="${error}">
      alert('[[${error}]]');
  </script>
</head>
<body>
>>>>>>> 6c1a6d69560234e6c98e66ab1dcc912923cde5fd
  <header><u>Admin Dashboard</u></header>
  <div class="container">
    <nav class="sidebar">
      <div class="profile">
        <img src="../profile.jpg" alt="Admin Profile" class="profile-pic">
        <h3 class="profile-name">Admin User</h3>
      </div>
<<<<<<< HEAD
      <a href="/student-management">Student Management</a>
      <a href="/course-management">Course Management</a>
      <a href="/faculty-management">Faculty Management</a>
      
=======
      <a href="/admin-dashboard">Admin Dashboard</a>
      <a href="/student-management">Student Management</a>
      <a href="/course-management">Course Management</a>
      <a href="/faculty-management">Faculty Management</a>
>>>>>>> 6c1a6d69560234e6c98e66ab1dcc912923cde5fd
      <a href="/attendence">Attendance</a>
      <a href="#">Exams & Results</a>
      <a href="#">Fee Management</a>
      <a href="#">Timetable</a>
      <a href="#">Reports</a>
    </nav>

    <main class="main" id="main-content">
<<<<<<< HEAD
    <center><h1>Course Record</h1></center>
     <!-- ‚úÖ Add Student Button -->
      <div style="display: flex; justify-content: flex-start; margin-bottom: 15px;">
        <a href="/add-course" 
=======
      <center><h1>Course Record</h1></center>

      <!-- ‚úÖ Add Course Button -->
      <div style="display: flex; justify-content: flex-start; margin-bottom: 15px;">
        <a href="/add-course"
>>>>>>> 6c1a6d69560234e6c98e66ab1dcc912923cde5fd
           style="padding:8px 15px;background-color:#28a745;color:white;border-radius:6px;text-decoration:none;">
          <i class="fa-solid fa-user-plus"></i> Add Course
        </a>
      </div>

<<<<<<< HEAD
      <!-- ‚úÖ Add Student Button -->
     <!-- ‚úÖ Search Form (no backend call, only frontend filtering) -->
<!-- ‚úÖ Search Bar -->
<div style="margin-bottom: 15px; display:flex; gap:10px;">
  <input type="text" id="searchInput" placeholder="Enter course ID"
         style="padding:8px;border:1px solid #ccc;border-radius:5px;flex:1;">
  <button onclick="searchStudent()" 
          style="padding:8px 15px;background-color:#007bff;color:white;border:none;border-radius:5px;">
    Search
  </button>
  <button onclick="resetTable()" 
          style="padding:8px 15px;background-color:#6c757d;color:white;border:none;border-radius:5px;">
    Refresh
  </button>
</div>
<!-- ‚úÖ Print Button for Course List -->
<div style="margin-bottom: 15px; text-align:right;">
  <button onclick="printCourseTable()" 
          style="padding:8px 15px;background-color:#17a2b8;color:white;border:none;border-radius:5px;">
    üñ®Ô∏è Print Course List
  </button>
</div>

<table class="student-table" border="1" cellspacing="0" cellpadding="8" style="width:100%; border-collapse: collapse;">
  <thead>
    <tr>
      <th onclick="sortTable(0)">ID ‚¨ç</th>
      <th onclick="sortTable(1)">Course Name ‚¨ç</th>
      <th onclick="sortTable(2)">Description ‚¨ç</th>
     
      <th>Delete</th>
      <th>Update</th>
    </tr>
  </thead>
  <tbody id="studentTableBody">
    <tr th:each="course : ${courses}">
      <td th:text="${course.id}"></td>
      <td th:text="${course.name}"></td>
      <td th:text="${course.description}"></td>
     
      <td>
        <form th:action="@{/delete-course}" method="post">
          <input type="hidden" name="id" th:value="${course.id}" />
          <button type="submit"
                  style="padding:5px;background-color:#dc3545;border:none;color:white;border-radius: 5px">
            <i class="fa-solid fa-trash"></i> Delete
          </button>
        </form>
      </td>
      <td>
        <a th:href="@{'/update-course/' + ${course.id}}"
           style="padding:5px;background-color:#118AB2;color:white;border-radius:5px;text-decoration:none;">
          <i class="fa-solid fa-pen-to-square"></i> Update
        </a>
      </td>
    </tr>
  </tbody>
</table>
</main>
<!-- ‚úÖ JS Logic -->
<script>
  // üîç Search
  function searchStudent() {
    const input = document.getElementById("searchInput").value.trim();
    const rows = document.querySelectorAll("#studentTableBody tr");

    rows.forEach(row => {
      const idCell = row.querySelector("td:first-child").textContent.trim();
      if (input === "" || idCell === input) {
        row.style.display = "";
      } else {
        row.style.display = "none";
      }
    });
  }

  function resetTable() {
    document.getElementById("searchInput").value = "";
    const rows = document.querySelectorAll("#studentTableBody tr");
    rows.forEach(row => row.style.display = "");
  }

  // üìä Sorting
  let sortDirection = {}; // store per-column sorting direction

  function sortTable(colIndex) {
    const tbody = document.getElementById("studentTableBody");
    const rows = Array.from(tbody.querySelectorAll("tr"));

    // toggle direction
    sortDirection[colIndex] = !sortDirection[colIndex];

    rows.sort((a, b) => {
      let valA = a.children[colIndex].textContent.trim();
      let valB = b.children[colIndex].textContent.trim();

      // convert to numbers if possible
      if (!isNaN(valA) && !isNaN(valB)) {
        valA = Number(valA);
        valB = Number(valB);
      }

      if (valA < valB) return sortDirection[colIndex] ? -1 : 1;
      if (valA > valB) return sortDirection[colIndex] ? 1 : -1;
      return 0;
    });

    // re-append sorted rows
    rows.forEach(row => tbody.appendChild(row));
  }
  
  
  
  
  
  
  
  
  function printCourseTable() {
	  // Get the course table element
	  const table = document.querySelector(".student-table").outerHTML;

	  // Open a new window
	  const newWin = window.open("", "", "width=800,height=600");

	  // Write table content to new window
	  newWin.document.write(`
	    <html>
	      <head>
	        <title>Course List</title>
	        <style>
	          table { width:100%; border-collapse: collapse; }
	          th, td { border:1px solid #333; padding:8px; text-align:left; }
	          th { background-color:#f2f2f2; }
	          h2 { text-align:center; }
	        </style>
	      </head>
	      <body>
	        <h2>Course List</h2>
	        ${table}
	      </body>
	    </html>
	  `);

	  newWin.document.close();
	  newWin.print();
	}

</script>


      </div>
   
=======
      <!-- ‚úÖ Search Bar -->
      <div style="margin-bottom: 15px; display:flex; gap:10px;">
        <input type="text" id="searchInput" placeholder="Enter Course ID"
               style="padding:8px;border:1px solid #ccc;border-radius:5px;flex:1;">
        <button onclick="searchCourse()"
                style="padding:8px 15px;background-color:#007bff;color:white;border:none;border-radius:5px;">
          Search
        </button>
        <button onclick="resetTable()"
                style="padding:8px 15px;background-color:#6c757d;color:white;border:none;border-radius:5px;">
          Refresh
        </button>
      </div>

      <!-- ‚úÖ Sort + Print Controls -->
      <div style="margin-bottom: 15px; display:flex; justify-content:space-between; align-items:center;">
        <!-- Total count -->
        <div style="font-weight:bold;">
          Total Courses: <span id="totalCount" th:text="${courses.size()}">0</span>
        </div>

        <!-- Controls -->
        <div style="display:flex; gap:10px;">
          <select id="sortDropdown" onchange="applySort()"
                  style="padding:8px;border:1px solid #ccc;border-radius:5px;">
            <option value="id">Sort by ID</option>
            <option value="name">Sort by Name</option>
            <option value="desc">Sort by Description</option>
          </select>
          <button onclick="printCourseTable()"
                  style="padding:8px 15px;background-color:#17a2b8;color:white;border:none;border-radius:5px;">
            üñ®Ô∏è Print Course List
          </button>
        </div>
      </div>

      <!-- ‚úÖ Course Table -->
      <table class="student-table" border="1" cellspacing="0" cellpadding="8"
             style="width:100%; border-collapse: collapse;">
        <thead>
          <tr>
            <th>Sr. No.</th>
            <th>ID</th>
            <th>Course Name</th>
            <th>Description</th>
            <th>Delete</th>
            <th>Update</th>
          </tr>
        </thead>
        <tbody id="studentTableBody">
          <tr th:each="course : ${courses}">
            <td></td> <!-- Sr. No. filled dynamically -->
            <td th:text="${course.id}"></td>
            <td th:text="${course.name}"></td>
            <td th:text="${course.description}"></td>
            <td>
              <form th:action="@{/delete-course}" method="post">
                <input type="hidden" name="id" th:value="${course.id}" />
                <button type="submit"
                        style="padding:5px;background-color:#dc3545;border:none;color:white;border-radius: 5px">
                  <i class="fa-solid fa-trash"></i> Delete
                </button>
              </form>
            </td>
            <td>
              <a th:href="@{'/update-course/' + ${course.id}}"
                 style="padding:5px;background-color:#118AB2;color:white;border-radius:5px;text-decoration:none;">
                <i class="fa-solid fa-pen-to-square"></i> Update
              </a>
            </td>
          </tr>
        </tbody>
      </table>
    </main>
  </div>

  <!-- ‚úÖ JS Logic -->
  <script>
    // Add Sr. No. dynamically
    function updateSrNo() {
      const rows = document.querySelectorAll("#studentTableBody tr");
      rows.forEach((row, index) => {
        row.querySelector("td:first-child").textContent = index + 1;
      });
      document.getElementById("totalCount").textContent = rows.length;
    }

    // üîç Search
    function searchCourse() {
      const input = document.getElementById("searchInput").value.trim();
      const rows = document.querySelectorAll("#studentTableBody tr");

      rows.forEach(row => {
        const idCell = row.children[1].textContent.trim();
        if (input === "" || idCell === input) {
          row.style.display = "";
        } else {
          row.style.display = "none";
        }
      });
      updateSrNo();
    }

    function resetTable() {
      document.getElementById("searchInput").value = "";
      const rows = document.querySelectorAll("#studentTableBody tr");
      rows.forEach(row => row.style.display = "");
      updateSrNo();
    }

    // üìä Sorting
    function applySort() {
      const sortBy = document.getElementById("sortDropdown").value;
      const tbody = document.getElementById("studentTableBody");
      const rows = Array.from(tbody.querySelectorAll("tr"));

      const colIndexMap = { id: 1, name: 2, desc: 3 };
      const colIndex = colIndexMap[sortBy];

      rows.sort((a, b) => {
        let valA = a.children[colIndex].textContent.trim();
        let valB = b.children[colIndex].textContent.trim();

        if (!isNaN(valA) && !isNaN(valB)) {
          valA = Number(valA);
          valB = Number(valB);
        }

        if (valA < valB) return -1;
        if (valA > valB) return 1;
        return 0;
      });

      tbody.innerHTML = "";
      rows.forEach(row => tbody.appendChild(row));
      updateSrNo();
    }

    // üñ®Ô∏è Print
    function printCourseTable() {
      const table = document.querySelector(".student-table").outerHTML;
      const newWin = window.open("", "", "width=800,height=600");
      newWin.document.write(`
        <html>
          <head>
            <title>Course List</title>
            <style>
              table { width:100%; border-collapse: collapse; }
              th, td { border:1px solid #333; padding:8px; text-align:left; }
              th { background-color:#f2f2f2; }
              h2 { text-align:center; }
            </style>
          </head>
          <body>
            <h2>Course List</h2>
            ${table}
          </body>
        </html>
      `);
      newWin.document.close();
      newWin.print();
    }

    // ‚úÖ On page load: update Sr. No.
    window.onload = updateSrNo;
  </script>
>>>>>>> 6c1a6d69560234e6c98e66ab1dcc912923cde5fd
</body>
</html>
